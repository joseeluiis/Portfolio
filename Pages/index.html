<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="../css/index.css">
    <title>Title</title>
</head>
<body>
<div class="boton">
    <button class="boton1" id="boton1"><i class="fa-solid fa-up-right-and-down-left-from-center"></i></button>
</div>
<div class="wrapper">

    <ul class="lista">
        <li><i class="fa-solid fa-code "></i></li>
        <li><i class="fa-solid fa-folder-open"></i></li>
        <li><i class="fa-solid fa-microchip"></i></li>
    </ul>
    <div class="entrada1">
        <span class="entrada" id="entrada-texto">Bienvenidos a mi Portfolio Web Personal</span>
    </div>
    <div class="enter">
        <a href="beta.html">
            <button class="boton2" id="boton2"><i class="fa-solid fa-right-from-left ">Enter</i></button>
        </a>
    </div>

</div>
</body>
<script>
    const textoCompleto = "Bienvenidos a mi Portfolio Web Personal";
    const parteClaraTexto = "Bienvenidos a mi";
    const parteOscuraTexto = " Portfolio Web Personal"; // Incluimos el espacio inicial
    const elementoTexto = document.getElementById('entrada-texto');

    // 3. Vaciar el contenido para empezar desde cero
    elementoTexto.textContent = '';

    // 4. Definir la velocidad de escritura (en milisegundos por letra)
    const velocidad = 75;

    // Crear los elementos SPAN con sus clases de color al inicio
    const spanClara = document.createElement('span');
    spanClara.classList.add('linea-clara');
    spanClara.style.display = 'block'; // Aseguramos el salto de línea al inicio

    const spanOscura = document.createElement('span');
    spanOscura.classList.add('linea-oscura');
    spanOscura.style.display = 'block'; // Aseguramos el salto de línea al inicio

    // Insertar los SPAN vacíos en el contenedor
    elementoTexto.appendChild(spanClara);
    elementoTexto.appendChild(spanOscura);

    // 5. Función de escritura gradual
    function escribir(texto, elemento, indice, siguiente) {
        if (indice < texto.length) {
            // Añadir el siguiente carácter al elemento correcto
            elemento.textContent += texto.charAt(indice);

            // Llamar a la función nuevamente después de un retraso
            setTimeout(function() {
                escribir(texto, elemento, indice + 1, siguiente);
            }, velocidad);
        } else if (siguiente) {
            // Cuando termina la primera parte, empieza la siguiente
            siguiente();
        }
    }

    // Funciones de inicio
    function iniciarEscrituraOscura() {
        // Iniciar la escritura de " Portfolio Web Personal"
        escribir(parteOscuraTexto, spanOscura, 0, null);
    }

    function iniciarEscrituraClara() {
        // Iniciar la escritura de "Bienvenidos a mi"
        // Al terminar, llama a iniciarEscrituraOscura
        escribir(parteClaraTexto, spanClara, 0, iniciarEscrituraOscura);
    }

    // 6. Iniciar el efecto (el 0 es el índice inicial)
    window.onload = function() {
        // Un pequeño retraso para que no sea instantáneo
        setTimeout(() => {
            iniciarEscrituraClara();
        }, 500);
    };

    // ... (El resto de tu código de Fullscreen y Transiciones va aquí abajo) ...

    // Pantalla completa
    const fullScreenBoton = document.getElementById('boton1');
    const fullScreenIcono = fullScreenBoton.querySelector('i');

    function actualizarIconoFullScreen() {
        if (document.fullscreenElement) {
            fullScreenIcono.classList.remove('fa-up-right-and-down-left-from-center');
            fullScreenIcono.classList.add('fa-down-left-and-up-right-to-center');
        } else {
            fullScreenIcono.classList.remove('fa-down-left-and-up-right-to-center');
            fullScreenIcono.classList.add('fa-up-right-and-down-left-from-center');
        }
    }

    function activarPantallaCompleta() {
        const elemento = document.documentElement;

        if (document.fullscreenElement) {
            document.exitFullscreen();
        } else {
            if (elemento.requestFullscreen) {
                elemento.requestFullscreen();
            } else if (elemento.mozRequestFullScreen) {
                elemento.mozRequestFullScreen();
            } else if (elemento.webkitRequestFullscreen) {
                elemento.webkitRequestFullscreen();
            } else if (elemento.msRequestFullscreen) {
                elemento.msRequestFullscreen();
            }
        }
    }

    fullScreenBoton.addEventListener('click', activarPantallaCompleta);
    document.addEventListener('fullscreenchange', actualizarIconoFullScreen);
    document.addEventListener('webkitfullscreenchange', actualizarIconoFullScreen);
    document.addEventListener('mozfullscreenchange', actualizarIconoFullScreen);

    //Transición
    const enterLink = document.querySelector('.enter a');

    function iniciarTransicion(e) {
        if (document.fullscreenElement) {
            localStorage.setItem('wasFullscreen', 'true');
        } else {
            localStorage.setItem('wasFullscreen', 'false');
        }
        e.preventDefault();
        const destino = enterLink.href;
        document.body.classList.add('fade-out');

        setTimeout(function() {
            window.location.href = destino;
        }, 500);
    }

    enterLink.addEventListener('click', iniciarTransicion);

    //Transición en caso de no interactuar
    const tiempo_maximo=20000
    let temporizador;

    function ejecucionInactividad(){
        document.body.classList.add('fade-out');

        if (document.fullscreenElement) {
            localStorage.setItem('wasFullscreen', 'true');
        } else {
            localStorage.setItem('wasFullscreen', 'false');
        }

        setTimeout(() => {
            window.location.href = 'beta.html';
        }, 500);
    }

    function resetemporizador() {
        clearTimeout(temporizador);
        temporizador = setTimeout(ejecucionInactividad, tiempo_maximo);
    }
    function verificador() {
        window.addEventListener('mousemove', resetemporizador);
        window.addEventListener('keypress', resetemporizador);
        window.addEventListener('scroll', resetemporizador);
        window.addEventListener('click', resetemporizador);

        resetemporizador();
    }
    document.addEventListener('DOMContentLoaded', verificador);
</script>
</html>